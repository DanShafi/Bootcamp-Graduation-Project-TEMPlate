<div
  id="map"
  style="width: 100%;
  height: 400px;"
  data-markers="<%= @markers.to_json %>"
  data-mapbox-api-key="<%= ENV['MAPBOX_API_KEY'] %>">
</div>
<div class="container content-index">
  <div class="row justify-content-between">
    <h1>Jobs</h1>
    <%= image_tag "undraw_personal_site_xyd1.svg", alt: "alttext", height: 60 %>
  </div>

  <br>
  <%= simple_form_for :search, url: jobs_path, method: :get do |f| %>
    <div class="search-form-control form-group">
      <input class="form-control string required" type="text" placeholder="Please enter the type of job you are looking for..." name="search[query]" id="search_query" />
      <button name="button" type="submit" class="btn btn-ghost">
        <i class="fas fa-search"></i> Search
      </button>
    </div>
  <% end %>
  <select class="sector-picker" style="width: 400px;" name="states[]" multiple="multiple">
    <% Sector.all.each do |sector| %>
      <option value="Sector"><%= sector.title.capitalize %></option>
    <% end %>
  </select>


  <div class="row justify-content-between">

    <% @jobs.each do |job|%>
      <% num_shifts = job.shifts.select { |shift| Time.parse(shift.start_time) > Time.now && !shift.user}.length  %>
      <% unless num_shifts <= 0 %>
        <%= render 'shared/show-jobs', job: job, num_shifts: num_shifts %>
      <% end %>

    <% end %>
  </div>
    <%= link_to 'Display all jobs', jobs_path, class: 'btn btn-flat', id: 'display_all_jobs' %>
</div>
